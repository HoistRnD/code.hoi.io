{"version":3,"file":"hoist-min.js","sources":["Hoist.js"],"names":[],"mappings":"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","sourcesContent":["\nvar Hoist = (function(u) {\n\tvar configs = {},\n\t\tuser,\n\t\ttoString = Object.prototype.toString;\n\n\tfunction extend(into, from) {\n\t\tfor (var x in from) into[x] = from[x];\n\t}\n\n\tfunction classOf(data) {\n\t\treturn toString.call(data).slice(8, -1);\n\t}\n\n\t// ajax helper\n\n\tfunction request(url, data, success, error, context) {\n\t\tvar type = classOf(data),\n\t\t\tmethod,\n\t\t\tcontentType;\n\n\t\tif (type === \"Object\") {\n\t\t\tmethod = \"POST\";\n\t\t\tcontentType = \"application/json\";\n\t\t\tdata = JSON.stringify(data);\n\t\t} else if (type === \"String\") {\n\t\t\tmethod = \"POST\";\n\t\t\tcontentType = \"application/json\";\n\t\t} else if (type === \"FormData\") {\n\t\t\tmethod = \"POST\";\n\t\t\tcontentType = \"multipart/form-data\";\n\t\t} else if (type === \"File\") {\n\t\t\tmethod = \"POST\";\n\t\t\tcontentType = data.type;\n\t\t} else {\n\t\t\tmethod = \"GET\";\n\t\t\tcontext = error;\n\t\t\terror = success;\n\t\t\tsuccess = data;\n\t\t\tdata = null;\n\t\t}\n\n\t\tif (typeof error !== \"function\") {\n\t\t\tcontext = error;\n\t\t\terror = null;\n\t\t}\n\n\t\tif (!configs.apikey) {\n\t\t\terror && setTimeout(function() {\n\t\t\t\terror.call(context, \"API key not set\", null);\n\t\t\t}, 0);\n\t\t}\n\n\t\tvar xhr = new XMLHttpRequest();\n\n\t\txhr.open(method, url);\n\n\t\tif (method === \"POST\") {\n\t\t\txhr.setRequestHeader(\"Content-Type\", contentType);\n\t\t}\n\n\t\txhr.setRequestHeader(\"Authorization\", \"Hoist \" + configs.apikey);\n\n\t\txhr.withCredentials = true;\n\n\t\txhr.onreadystatechange = function() {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\n\t\t\t\t\tsuccess && success.call(context, JSON.parse(xhr.responseText), xhr);\n\t\t\t\t} else {\n\t\t\t\t\terror && error.call(context, xhr.statusText, xhr);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\txhr.send(data);\n\t}\n\n\tvar managers = {};\n\n\tfunction DataManager(type) {\n\t\tthis.type = type;\n\t\tthis.url = \"https://data.hoi.io/\" + type;\n\t}\n\n\textend(DataManager.prototype, {\n\t\tget: function(id, success, error, context) {\n\t\t\tif (typeof id === \"function\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = id;\n\n\t\t\t\trequest(this.url, success, error, context);\n\t\t\t} else {\n\t\t\t\trequest(this.url + \"/\" + id, success, error, context);\n\t\t\t}\n\t\t},\n\n\t\tpost: function(id, data, success, error, context) {\n\t\t\tif (typeof id === \"object\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = id;\n\n\t\t\t\tif (data.x_id) {\n\t\t\t\t\tid = data.x_id;\n\t\t\t\t} else {\n\t\t\t\t\trequest(this.url, data, success, error, context);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trequest(this.url + \"/\" + id, data, success, error, context);\n\t\t}\n\t});\n\n\tHoist = function(type) {\n\t\treturn managers[type] || (managers[type] = new DataManager(type));\n\t};\n\n\textend(Hoist, {\n\t\tapiKey: function(v) {\n\t\t\treturn this.config(\"apikey\", v);\n\t\t},\n\n\t\tconfig: function(a, b) {\n\t\t\tif (b === u) {\n\t\t\t\tvar type = typeof a;\n\n\t\t\t\tif (type === \"string\") {\n\t\t\t\t\treturn configs[a];\n\t\t\t\t} else if (type === \"object\") {\n\t\t\t\t\tfor (var x in a) {\n\t\t\t\t\t\tconfigs[x.toLowerCase()] = a[x];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconfigs[a.toLowerCase()] = b;\n\t\t\t}\n\t\t},\n\n\t\tstatus: function(success, error, context) {\n\t\t\trequest(\"https://auth.hoi.io/status\", success, error, context);\n\t\t},\n\n\t\tsignup: function(member, success, error, context) {\n\t\t\tif (typeof member === \"object\") {\n\t\t\t\trequest(\"https://auth.hoi.io/user\", member, function(resp) {\n\t\t\t\t\tuser = resp;\n\t\t\t\t\tsuccess.apply(this, arguments);\n\t\t\t\t}, error, context);\n\t\t\t}\n\t\t},\n\n\t\tlogin: function(member, success, error, context) {\n\t\t\tif (typeof member === \"object\") {\n\t\t\t\trequest(\"https://auth.hoi.io/login\", member, function(resp) {\n\t\t\t\t\tuser = resp;\n\t\t\t\t\tsuccess.apply(this, arguments);\n\t\t\t\t}, error, context);\n\t\t\t}\n\t\t},\n\n\t\tnotify: function(id, data, success, error, context) {\n\t\t\tif (typeof id === \"object\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = id.data;\n\t\t\t\tid = id.id;\n\t\t\t}\n\n\t\t\tif (typeof data === \"object\") {\n\t\t\t\trequest(\"https://notify.hoi.io/notification/\" + id, data, success, error, context);\n\t\t\t}\n\t\t},\n\n\t\tfile: function(key, file, success, error, context) {\n\t\t\tif (file.jQuery) file = file[0];\n\n\t\t\tvar type = classOf(file),\n\t\t\t\tdata;\n\n\t\t\tif (type === \"File\") {\n\t\t\t\tdata = new FormData();\n\t\t\t\tdata.append(\"FILE\", file);\n\t\t\t} else if (type === \"FormData\") {\n\t\t\t\tdata = file;\n\t\t\t} else if (type === \"HTMLInputElement\") {\n\t\t\t\tfile = file.files && file.files[0];\n\n\t\t\t\tif (!file) return false;\n\n\t\t\t\tdata = new FormData();\n\t\t\t\tdata.append(\"file\", file);\n\t\t\t} else if (type === \"Function\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = file;\n\n\t\t\t\trequest(\"https://file.hoi.io/\" + key, success, error, context);\n\t\t\t\treturn;\n\t\t\t} else if (type === \"Undefined\") {\n\t\t\t\trequest(\"https://file.hoi.io/\" + key, success, error, context);\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trequest(\"https://file.hoi.io/\" + key, data, success, error, context);\n\t\t}\n\t});\n\n\tHoist.clone = arguments.callee;\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(\"Hoist\", [], function() {\n\t\t\treturn Hoist;\n\t\t});\n\t}\n\telse\n\t{\n\t\t//put hoist on the global namespace\n\t\twindow.Hoist = Hoist;\n\t}\n\n})();\n"]}