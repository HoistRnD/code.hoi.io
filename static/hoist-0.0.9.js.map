{
  "version": 3,
  "file": "/Users/jamiewilson/Hoist/hoist-js/build/out/hoist.js",
  "sources": [
    "Hoist.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "/*jshint loopfunc: true */\n(function () {\n\tvar toString = Object.prototype.toString,\n\t\tsplice = Array.prototype.splice,\n\t\tu;\n\n\t// helpers\n\n\tfunction extend(into, from) {\n\t\tfor (var x in from) into[x] = from[x];\n\t\treturn into;\n\t}\n\t\n\tfunction extendAliases(into, from) {\n\t\tfor (var x in from) {\n\t\t\tvar xs = x.split(' ');\n\t\t\tfor (var i = 0; i < xs.length; i++) into[xs[i]] = from[x];\n\t\t}\n\t}\n\n\tfunction get(obj, key, nothing) {\n\t\tif (key.indexOf('.') == -1) {\n\t\t\treturn obj[key];\n\t\t} else {\n\t\t\tkey = key.split('.');\n\n\t\t\tfor (var i = 0; i < key.length - 1; i++) {\n\t\t\t\tobj = obj[key[i]];\n\t\t\t\tif (!obj) return \"\";\n\t\t\t}\n\n\t\t\treturn obj[key[i]];\n\t\t}\n\t}\n\n\tfunction classOf(data) {\n\t\treturn toString.call(data).slice(8, -1);\n\t}\n\n\tfunction asyncError(error, context) {\n\t\tvar promise = new Promise();\n\n\t\tvar args = splice.call(arguments, 2);\n\t\t\n\t\tpromise.reject(args[0]);\n\t\n\t\tif (typeof error === \"function\") {\n\t\t\terror.apply(context, args);\n\t\t}\n\t\t\n\t\treturn promise;\n\t}\n\t\n\tfunction Promise() {\n\t\tthis.cbs = [];\n\t}\n\t\n\textend(Promise.prototype, {\n\t\tresolve: function (value) {\n\t\t\tif (this.state) return;\n\t\t\t\n\t\t\tvar then = value && value.then,\n\t\t\t\tself = this,\n\t\t\t\tcalled;\n\t\t\t\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\ttry {\n\t\t\t\t\tthen.call(value, function (value) {\n\t\t\t\t\t\tif (!called) {\n\t\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\t\tself.resolve(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, function (value) {\n\t\t\t\t\t\tif (!called) {\n\t\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\t\tself.reject(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tthis.reject(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.state = 1;\n\t\t\t\tthis.value = value;\n\t\t\t\n\t\t\t\tfor (var i = 0; i < this.cbs.length; i++) {\n\t\t\t\t\tvar success = this.cbs[i][0],\n\t\t\t\t\t\tpromise = this.cbs[i][2];\n\t\t\t\t\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (typeof success === \"function\") {\n\t\t\t\t\t\t\tpromise.resolve(success(value));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tpromise.reject(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.cbs = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\treject: function (value) {\n\t\t\tif (this.state) return;\n\t\t\n\t\t\tthis.state = -1;\n\t\t\tthis.value = value;\n\t\t\t\n\t\t\tfor (var i = 0; i < this.cbs.length; i++) {\n\t\t\t\tvar error = this.cbs[i][1],\n\t\t\t\t\tpromise = this.cbs[i][2];\n\t\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof error === \"function\") {\n\t\t\t\t\t\tpromise.resolve(error(value));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpromise.reject(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\n\t\t\tthis.cbs = null;\n\t\t},\n\t\n\t\tthen: function (success, error) {\n\t\t\tvar promise = new Promise();\n\t\t\n\t\t\tif (this.state) {\n\t\t\t\tvar ret;\n\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tif (this.state == 1) {\n\t\t\t\t\t\tif (typeof success === \"function\") {\n\t\t\t\t\t\t\tpromise.resolve(success(this.value));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.resolve(this.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof error === \"function\") {\n\t\t\t\t\t\t\tpromise.resolve(error(this.value));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(this.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.cbs.push([ success, error, promise ]);\n\t\t\t}\n\t\t\t\n\t\t\treturn promise;\n\t\t}\n\t});\n\n\t// ajax helper\n\n\tfunction request(configs, opts, success, error, context) {\n\t\tvar method, contentType, responseType;\n\n\t\tif (\"data\" in opts) {\n\t\t\tvar type = classOf(opts.data);\n\n\t\t\tif (type === \"String\") {\n\t\t\t\tcontentType = \"application/json\";\n\t\t\t} else if (type === \"FormData\") {\n\t\t\t\tmethod = opts.method || \"POST\";\n\t\t\t} else {\n\t\t\t\tmethod = opts.method || \"POST\";\n\t\t\t\tcontentType = \"application/json\";\n\t\t\t\topts.data = JSON.stringify(opts.data);\n\t\t\t}\n\t\t} else {\n\t\t\tmethod = opts.method || \"GET\";\n\t\t}\n\n\t\tif (typeof error !== \"function\") {\n\t\t\tif (!context) context = error;\n\t\t\terror = null;\n\t\t}\n\n\t\tif (configs && !configs.apikey) {\n\t\t\treturn asyncError(error, context, \"API key not set\", null);\n\t\t}\n\n\t\tvar xhr = new XMLHttpRequest();\n\n\t\txhr.open(method, configs ? configs.protocol + opts.url : opts.url);\n\n\t\tresponseType = opts.responseType || \"json\";\n\n\t\t// Safari will error out (!) if we try to set a responseType of \"json\"\n\n\t\tif (responseType != \"json\") {\n\t\t\txhr.responseType = responseType;\n\n\t\t\t// Safari before 6.1 does not support \"blob\" but does support \"arraybuffer\"\n\n\t\t\tif (responseType == \"blob\" && xhr.responseType != \"blob\") {\n\t\t\t\txhr.responseType = \"arraybuffer\";\n\t\t\t}\n\t\t}\n\n\t\tcontentType && xhr.setRequestHeader(\"Content-Type\", contentType);\n\n\t\tif (configs) {\n\t\t\txhr.setRequestHeader(\"Authorization\", \"Hoist \" + configs.apikey);\n\t\t}\n\n\t\tif (opts.bucket) {\n\t\t\txhr.setRequestHeader(\"x-bucket-key\", opts.bucket);\n\t\t}\n\n\t\txhr.withCredentials = true;\n\t\t\n\t\tvar promise = new Promise();\n\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 400) {\n\t\t\t\t\tvar response = xhr.response || xhr.responseText,\n\t\t\t\t\t\ttype = classOf(response);\n\n\t\t\t\t\tif (type === \"String\" && responseType === \"json\") {\n\t\t\t\t\t\tresponse = JSON.parse(response);\n\t\t\t\t\t} else if (type === \"ArrayBuffer\" && responseType === \"blob\") {\n\t\t\t\t\t\tresponse = new Blob([response]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (opts.process) response = opts.process(response);\n\n\t\t\t\t\tsuccess && success.call(context, response, xhr);\n\t\t\t\t\tpromise.resolve(response);\n\t\t\t\t} else {\n\t\t\t\t\tvar message = xhr.statusText;\n\t\t\t\t\n\t\t\t\t\tif (opts.processError) message = opts.processError(message);\n\t\t\t\t\n\t\t\t\t\terror && error.call(context, message, xhr);\n\t\t\t\t\tpromise.reject(message);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\txhr.send(opts.data);\n\t\t\n\t\treturn promise;\n\t}\n\n\t// simple data manager\n\n\tfunction DataManager(hoist, type, bucket) {\n\t\tthis.type = type;\n\t\tthis.url = \"data.hoi.io/\" + type;\n\t\tthis.hoist = hoist;\n\t\tthis.bucket = bucket;\n\t}\n\n\textend(DataManager.prototype, {\n\t\tget: function (id, success, error, context) {\n\t\t\tif (typeof id === \"function\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = id;\n\t\t\t\tid = null;\n\t\t\t}\n\n\t\t\tif (id) {\n\t\t\t\treturn request(this.hoist._configs, { url: this.url + \"/\" + id, bucket: this.bucket }, success, error, context);\n\t\t\t} else {\n\t\t\t\treturn request(this.hoist._configs, { url: this.url, bucket: this.bucket }, success, error, context);\n\t\t\t}\n\t\t},\n\t\t\n\t\tquery: function (query) {\n\t\t\treturn new QueryManager(this, { q: query });\n\t\t},\n\t\t\n\t\twhere: function (key, value) {\n\t\t\treturn new QueryManager(this, {}).where(key, value);\n\t\t},\n\t\t\n\t\tlimit: function (limit) {\n\t\t\treturn new QueryManager(this, { limit: limit });\n\t\t},\n\t\t\n\t\tskip: function (skip) {\n\t\t\treturn new QueryManager(this, { skip: skip });\n\t\t},\n\t\t\n\t\tsortBy: function () {\n\t\t\tvar qm = new QueryManager(this, {});\n\t\t\treturn qm._sort(false, arguments);\n\t\t},\n\n\t\tpost: function (id, data, success, error, context) {\n\t\t\tif (typeof id === \"object\" && id !== null) {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = id;\n\t\t\t\tid = data._id;\n\t\t\t}\n\n\t\t\tvar singleton = classOf(data) === \"Array\" && data.length === 1;\n\n\t\t\tif (id) {\n\t\t\t\treturn request(this.hoist._configs, { url: this.url + \"/\" + id, bucket: this.bucket, data: data }, success, error, context);\n\t\t\t} else {\n\t\t\t\treturn request(this.hoist._configs, {\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tbucket: this.bucket,\n\t\t\t\t\tdata: data,\n\t\t\t\t\tprocess: function (resp) {\n\t\t\t\t\t\treturn singleton ? [resp] : resp;\n\t\t\t\t\t}\n\t\t\t\t}, success, error, context);\n\t\t\t}\n\t\t},\n\n\t\tclear: function (success, error, context) {\n\t\t\treturn request(this.hoist._configs, { url: this.url, bucket: this.bucket, method: \"DELETE\" }, success, error, context);\n\t\t},\n\n\t\tremove: function (id, success, error, context) {\n\t\t\tif (!id) {\n\t\t\t\treturn asyncError(error, context, \"Cannot remove model with empty id\", null);\n\t\t\t}\n\n\t\t\treturn request(this.hoist._configs, { url: this.url + \"/\" + id, bucket: this.bucket, method: \"DELETE\" }, success, error, context);\n\t\t},\n\n\t\tuse: function (bucket) {\n\t\t\treturn this.hoist(this.type, bucket);\n\t\t}\n\t});\n\t\n\t// query manager\n\t\n\tfunction QueryManager(dm, query) {\n\t\tthis.dm = dm;\n\t\tthis.query = query;\n\t}\n\t\n\textend(QueryManager.prototype, {\n\t\tget: function (success, error, context) {\n\t\t\tvar parts = [];\n\t\t\n\t\t\tif (this.query.q) parts.push(\"q=\" + encodeURIComponent(JSON.stringify(this.query.q)));\n\t\t\tif (this.query.limit) parts.push(\"limit=\" + this.query.limit);\n\t\t\tif (this.query.skip) parts.push(\"skip=\" + this.query.skip);\n\t\t\tif (this.query.sort) parts.push(\"sort=\" + encodeURIComponent(JSON.stringify(this.query.sort)));\n\t\t\t\n\t\t\treturn request(this.dm.hoist._configs, { url: this.dm.url + \"?\" + parts.join('&'), bucket: this.dm.bucket }, success, error, context);\n\t\t},\n\t\t\n\t\twhere: function (key, value) {\n\t\t\tif (typeof key === \"string\") {\n\t\t\t\tif (value === u) {\n\t\t\t\t\treturn new PartialQueryManager(this, key);\n\t\t\t\t} else {\n\t\t\t\t\treturn this._where(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar query = extend({}, this.query);\n\t\t\tquery.q = query.q ? extend({}, query.q) : {};\n\t\t\textend(query.q, key);\n\t\t\treturn new QueryManager(this.dm, query);\n\t\t},\n\t\t\n\t\t_where: function (key, value) {\n\t\t\tvar query = extend({}, this.query);\n\t\t\tquery.q = query.q ? extend({}, query.q) : {};\n\t\t\tquery.q[key] = value;\n\t\t\treturn new QueryManager(this.dm, query);\n\t\t},\n\t\t\n\t\t_whereAnd: function (key, op, value) {\n\t\t\tvar query = extend({}, this.query);\n\t\t\tquery.q = query.q ? extend({}, query.q) : {};\n\t\t\tquery.q[key] = query.q[key] ? extend({}, query.q[key]) : {};\n\t\t\tquery.q[key][op] = value;\n\t\t\treturn new QueryManager(this.dm, query);\n\t\t},\n\t\t\n\t\tlimit: function (limit) {\n\t\t\tvar query = extend({}, this.query);\n\t\t\tquery.limit = limit;\n\t\t\treturn new QueryManager(this.dm, query);\n\t\t},\n\t\t\n\t\tskip: function (skip) {\n\t\t\tvar query = extend({}, this.query);\n\t\t\tquery.skip = skip;\n\t\t\treturn new QueryManager(this.dm, query);\n\t\t},\n\t\t\n\t\t_sort: function (append, args) {\n\t\t\tvar sort = append && this.query.sort && this.query.sort.slice() || [];\t\t\t\n\t\t\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\tif (args[i].slice(-4).toLowerCase() == \" asc\") {\n\t\t\t\t\tsort.push([ args[i].slice(0, -4), 1 ]);\n\t\t\t\t} else if (args[i].slice(-5).toLowerCase() == \" desc\") {\n\t\t\t\t\tsort.push([ args[i].slice(0, -5), -1 ]);\n\t\t\t\t} else {\n\t\t\t\t\tsort.push([ args[i], 1 ]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar query = extend({}, this.query);\n\t\t\tquery.sort = sort;\n\t\t\treturn new QueryManager(this.dm, query);\n\t\t},\n\t\t\n\t\tsortBy: function () {\n\t\t\treturn this._sort(false, arguments);\n\t\t},\n\t\t\n\t\tthenBy: function () {\n\t\t\treturn this._sort(true, arguments);\n\t\t},\n\t\t\n\t\tuse: function (bucket) {\n\t\t\treturn new QueryManager(this.dm.use(bucket), this.query);\n\t\t}\n\t});\n\t\n\t// partial query manager, proxying mongo queries since 2014\n\t\n\tfunction PartialQueryManager(qm, key) {\n\t\tthis.qm = qm;\n\t\tthis.key = key;\n\t}\n\t\n\textendAliases(PartialQueryManager.prototype, {\n\t\t\"eq is equals\":\n\t\t\tfunction (value) { this.qm = this.qm._where(this.key, value); return this; },\n\t\t\"neq ne isnt notEquals\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$ne\",  value); return this; },\n\t\t\"gt greaterThan\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$gt\",  value); return this; },\n\t\t\"gte ge atLeast\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$gte\", value); return this; },\n\t\t\"lt lessThan\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$lt\",  value); return this; },\n\t\t\"lte le atMost\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$lte\", value); return this; },\n\t\t\"elem in\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$in\",  value); return this; },\n\t\t\"nelem nin notIn notElem\":\n\t\t\tfunction (value) { this.qm = this.qm._whereAnd(this.key, \"$nin\", value); return this; },\n\t\t\"exists\":\n\t\t\tfunction () { this.qm = this.qm._whereAnd(this.key, \"$exists\", true); return this; }\n\t});\n\t\n\textend(PartialQueryManager.prototype, {\n\t\twhere: function (key, value) { return this.qm.where(key, value); },\n\t\tlimit: function (limit) { return this.qm.limit(limit); },\n\t\tskip: function (skip) { return this.qm.skip(skip); },\n\t\tsort: function () { return this.qm.sort.apply(this.qm, arguments); },\n\t\tsortBy: function () { return this.qm._sort(false, arguments); },\n\t\tthenBy: function () { return this.qm._sort(true, arguments); },\n\t\tuse: function (bucket) { return this.qm.use(bucket); },\n\t\t\n\t\tget: function (success, error, context) {\n\t\t\treturn this.qm.get(success, error, context);\n\t\t}\n\t});\n\n\t// complex data manager\n\n\tvar tagRegex = /\\[([^\\]]+)\\]/g;\n\n\tfunction ObjectDataManager(hoist, hash, bucket) {\n\t\tvar items = this.items = {};\n\n\t\tfor (var x in hash) {\n\t\t\tvar item = { key: x, path: hash[x], requires: [] },\n\t\t\t\tmatch;\n\n\t\t\tif (item.path[item.path.length - 1] == '?') {\n\t\t\t\titem.path = item.path.slice(0, -1);\n\t\t\t\titem.optional = true;\n\t\t\t}\n\n\t\t\twhile ((match = tagRegex.exec(item.path)) !== null) {\n\t\t\t\tvar dot = match[1].indexOf('.');\n\n\t\t\t\tif (dot > -1) {\n\t\t\t\t\titem.requires.push(match[1].slice(0, dot));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\titems[x] = item;\n\t\t}\n\n\t\tthis.hoist = bucket ? hoist.use(bucket) : hoist;\n\t}\n\n\textend(ObjectDataManager.prototype, {\n\t\tget: function (data, success, error, context) {\n\t\t\tvar items = {},\n\t\t\t\tresult = {},\n\t\t\t\tmanagers = {},\n\t\t\t\thoist = this.hoist,\n\t\t\t\tfailed,\n\t\t\t\tpromise = new Promise();\n\n\t\t\tif (typeof data === \"function\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = {};\n\t\t\t} else if (typeof data === \"string\") {\n\t\t\t\tdata = { id: data };\n\t\t\t}\n\n\t\t\textend(items, this.items);\n\n\t\t\tif (typeof error !== \"function\") {\n\t\t\t\tif (!context) context = error;\n\t\t\t\terror = null;\n\t\t\t}\n\n\t\t\tfunction succeed(key) {\n\t\t\t\treturn function (data) {\n\t\t\t\t\tresult[key] = data;\n\t\t\t\t\tdelete items[key];\n\t\t\t\t\tadvance();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction fail(key) {\n\t\t\t\treturn function (msg, xhr) {\n\t\t\t\t\tif (items[key].optional) {\n\t\t\t\t\t\tsucceed(key)(null);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfailed = true;\n\t\t\t\t\t\tmsg = key + \": \" + msg;\n\t\t\t\t\t\terror && error.call(context, msg, xhr);\n\t\t\t\t\t\tpromise.reject(msg);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction advance() {\n\t\t\t\tif (failed) return;\n\n\t\t\t\tvar loading = 0;\n\n\t\t\t\tout: for (var x in items) {\n\t\t\t\t\tvar item = items[x];\n\n\t\t\t\t\tif (!managers[x]) {\n\t\t\t\t\t\tfor (var i = 0; i < item.requires.length; i++) {\n\t\t\t\t\t\t\tif (item.requires[i] in items) {\n\t\t\t\t\t\t\t\tcontinue out;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar path = item.path.replace(tagRegex, function (a, b) {\n\t\t\t\t\t\t\t\tif (b.indexOf('.') > -1) {\n\t\t\t\t\t\t\t\t\treturn get(result, b);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn data[b] || \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tspace = path.indexOf(' ');\n\n\t\t\t\t\t\tif (space > -1) {\n\t\t\t\t\t\t\t(managers[item.key] = hoist(path.slice(0, space))).get(path.slice(space + 1), succeed(item.key), fail(item.key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t(managers[item.key] = hoist(path)).get(succeed(item.key), fail(item.key));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tloading++;\n\t\t\t\t}\n\n\t\t\t\tif (!loading) {\n\t\t\t\t\tsuccess && success.call(context, result, managers);\n\t\t\t\t\tpromise.resolve(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tadvance();\n\t\t\t\n\t\t\treturn promise;\n\t\t}\n\t});\n\n\tvar bucketManagerMethods = {\n\t\tget: function (type, id, success, error, context) {\n\t\t\treturn this.hoist(type, this.bucket).get(id, success, error, context);\n\t\t},\n\n\t\tpost: function (type, id, success, error, context) {\n\t\t\treturn this.hoist(type, this.bucket).post(id, data, success, error, context);\n\t\t},\n\n\t\tclear: function (type, success, error, context) {\n\t\t\treturn this.hoist(type, this.bucket).clear(success, error, context);\n\t\t},\n\n\t\tremove: function (type, id, success, error, context) {\n\t\t\treturn this.hoist(type, this.bucket).remove(id, success, error, context);\n\t\t},\n\n\t\tmeta: function (data, success, error, context) {\n\t\t\treturn this.hoist.bucket.meta(this.bucket, data, success, error, context);\n\t\t},\n\n\t\tinvite: function (data, success, error, context) {\n\t\t\treturn this.hoist.bucket.invite(this.bucket, data, success, error, context);\n\t\t},\n\n\t\tenter: function (success, error, context) {\n\t\t\treturn this.hoist.bucket.set(this.bucket, success, error, context);\n\t\t}\n\t};\n\t\n\tvar hoistMethods = {\n\t\tapiKey: function (v) {\n\t\t\treturn this.config(\"apikey\", v);\n\t\t},\n\n\t\tget: function (type, id, success, error, context) {\n\t\t\treturn this(type).get(id, success, error, context);\n\t\t},\n\n\t\tpost: function (type, id, data, success, error, context) {\n\t\t\treturn this(type).post(id, data, success, error, context);\n\t\t},\n\n\t\tclear: function (type, success, error, context) {\n\t\t\treturn this(type).clear(success, error, context);\n\t\t},\n\n\t\tremove: function (type, id, success, error, context) {\n\t\t\treturn this(type).remove(id, success, error, context);\n\t\t},\n\n\t\tconfig: function (a, b, c) {\n\t\t\tif (b === u) {\n\t\t\t\tvar type = typeof a;\n\n\t\t\t\tif (type === \"string\") {\n\t\t\t\t\treturn this._configs[a];\n\t\t\t\t} else if (type === \"object\") {\n\t\t\t\t\tfor (var x in a) {\n\t\t\t\t\t\tthis._configs[x.toLowerCase()] = a[x];\n\t\t\t\t\t}\n\t\t\t\t} else if (type === \"function\" || type === \"undefined\") {\n\t\t\t\t\tvar hoist = this;\n\t\t\t\t\n\t\t\t\t\treturn request(null, {\n\t\t\t\t\t\turl: \"/settings\",\n\t\t\t\t\t\tprocess: function (settings) {\n\t\t\t\t\t\t\thoist.config(settings);\n\t\t\t\t\t\t\treturn settings;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, a, b, c);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._configs[a.toLowerCase()] = b;\n\t\t\t}\n\t\t},\n\n\t\tstatus: function (success, error, context) {\n\t\t\tvar hoist = this;\n\t\t\t\n\t\t\tif (typeof error !== \"function\") {\n\t\t\tif (!context) context = error;\n\t\t\t\terror = null;\n\t\t\t}\n\n\t\t\treturn request(this._configs, {\n\t\t\t\turl: \"auth.hoi.io/status\",\n\t\t\t\tprocess: function (resp) {\n\t\t\t\t\thoist._user = resp;\n\t\t\t\t\treturn resp;\n\t\t\t\t},\n\t\t\t\tprocessError: function (msg) {\n\t\t\t\t\thoist._user = null;\n\t\t\t\t\treturn msg;\n\t\t\t\t}\n\t\t\t}, success, error, context);\n\t\t},\n\n\t\tsignup: function (member, success, error, context) {\n\t\t\tvar hoist = this;\n\t\t\t\n\t\t\tif (typeof member === \"object\") {\n\t\t\t\treturn request(this._configs, {\n\t\t\t\t\turl: \"auth.hoi.io/user\",\n\t\t\t\t\tdata: member,\n\t\t\t\t\tprocess: function (resp) {\n\t\t\t\t\t\tif (resp.redirectUrl) {\n\t\t\t\t\t\t\twindow.location = resp.redirectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\thoist._user = resp;\n\t\t\t\t\t\treturn resp;\n\t\t\t\t\t}\n\t\t\t\t}, success, error, context);\n\t\t\t}\n\t\t},\n\n\t\tlogin: function (member, success, error, context) {\n\t\t\tvar hoist = this;\n\t\t\t\n\t\t\tif (typeof member === \"object\") {\n\t\t\t\treturn request(this._configs, {\n\t\t\t\t\turl: \"auth.hoi.io/login\",\n\t\t\t\t\tdata: member,\n\t\t\t\t\tprocess: function (resp) {\n\t\t\t\t\t\tif (resp.redirectUrl) {\n\t\t\t\t\t\t\twindow.location = resp.redirectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t\thoist._user = resp;\n\t\t\t\t\t\treturn resp;\n\t\t\t\t\t}\n\t\t\t\t}, success, error, context);\n\t\t\t}\n\t\t},\n\n\t\tlogout: function (success, error, context) {\n\t\t\tvar hoist = this;\n\n\t\t\treturn request(this._configs, {\n\t\t\t\turl: \"auth.hoi.io/logout\",\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tprocess: function (resp) {\n\t\t\t\t\thoist._user = null;\n\t\t\t\t\thoist._bucket = null;\n\t\t\t\t\treturn resp;\n\t\t\t\t}\n\t\t\t}, success, error, context);\n\t\t},\n\n\t\taccept: function (code, data, success, error, context) {\n\t\t\tvar hoist = this;\n\n\t\t\treturn request(this._configs, {\n\t\t\t\turl: \"auth.hoi.io/invite/\" + code + \"/user\",\n\t\t\t\tdata: data,\n\t\t\t\tprocess: function (resp) {\n\t\t\t\t\thoist._user = resp;\n\t\t\t\t\treturn resp;\n\t\t\t\t}\n\t\t\t}, success, error, context);\n\t\t},\n\n\t\tuser: function () {\n\t\t\treturn this._user && extend({}, this._user);\n\t\t},\n\n\t\tnotify: function (id, data, success, error, context) {\n\t\t\tif (typeof id === \"object\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = id.data;\n\t\t\t\tid = id.id;\n\t\t\t}\n\t\t\t\n\t\t\tif (typeof data === \"object\") {\n\t\t\t\treturn request(this._configs, { url: \"notify.hoi.io/notification/\" + id, data: data }, success, error, context);\n\t\t\t} else {\n\t\t\t\treturn asyncError(error, context, \"data for notification must be an object\");\n\t\t\t}\n\t\t},\n\n\t\tfile: function (key, file, success, error, context) {\n\t\t\tif (file.jquery) file = file[0];\n\n\t\t\tvar type = classOf(file),\n\t\t\t\tdata;\n\n\t\t\tif (type === \"File\") {\n\t\t\t\tdata = new FormData();\n\t\t\t\tdata.append(\"file\", file);\n\t\t\t} else if (type === \"FormData\") {\n\t\t\t\tdata = file;\n\t\t\t} else if (type === \"HTMLInputElement\") {\n\t\t\t\tfile = file.files && file.files[0];\n\n\t\t\t\tif (!file) return false;\n\n\t\t\t\tdata = new FormData();\n\t\t\t\tdata.append(\"file\", file);\n\t\t\t} else if (type === \"Function\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = file;\n\n\t\t\t\treturn request(this._configs, { url: \"file.hoi.io/\" + key, responseType: \"blob\" }, success, error, context);\n\t\t\t} else if (type === \"Undefined\") {\n\t\t\t\treturn request(this._configs, { url: \"file.hoi.io/\" + key, responseType: \"blob\" }, success, error, context);\n\t\t\t} else {\n\t\t\t\treturn asyncError(error, context, \"can't send file of type \" + type);\n\t\t\t}\n\n\t\t\treturn request(this._configs, { url: \"file.hoi.io/\" + key, data: data }, success, error, context);\n\t\t},\n\n\t\tuse: function (bucket) {\n\t\t\tvar hoist = this;\n\n\t\t\tvar manager = extend(function (type) {\n\t\t\t\tif (classOf(type) === \"Object\") {\n\t\t\t\t\treturn new ObjectDataManager(manager, type);\n\t\t\t\t} else {\n\t\t\t\t\treturn new DataManager(hoist, type, bucket);\n\t\t\t\t}\n\t\t\t}, bucketManagerMethods);\n\n\t\t\tmanager.hoist = this;\n\t\t\tmanager.bucket = bucket;\n\n\t\t\treturn manager;\n\t\t},\n\t\tclone: function () {\n\t\t\tvar hoist = extend(makeHoist(), {\n\t\t\t\t_configs: extend({}, this._configs),\n\t\t\t\t_user: null,\n\t\t\t\t_bucket: null,\n\t\t\t\t_managers: {}\n\t\t\t});\n\n\t\t\treturn hoist;\n\t\t}\n\t};\n\n\tvar bucketMethods = {\n\t\tstatus: function (success, error, context) {\n\t\t\tvar hoist = this._hoist;\n\t\t\tif (typeof error !== \"function\") {\n\t\t\t\tif (!context) context = error;\n\t\t\t\terror = null;\n\t\t\t}\n\n\t\t\treturn request(this._hoist._configs, {\n\t\t\t\turl: \"auth.hoi.io/bucket/current\",\n\t\t\t\tprocess: function (bucket) {\n\t\t\t\t\thoist._bucket = bucket;\n\t\t\t\t\treturn bucket;\n\t\t\t\t},\n\t\t\t\tprocessError: function (message) {\n\t\t\t\t\thoist._bucket = null;\n\t\t\t\t\treturn message;\n\t\t\t\t}\n\t\t\t}, success, error, context);\n\t\t},\n\n\t\tpost: function (id, data, success, error, context) {\n\t\t\tif (typeof id !== \"string\" && id !== null) {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = id;\n\t\t\t\tid = null;\n\t\t\t}\n\n\t\t\tif (typeof data === \"function\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = null;\n\t\t\t}\n\n\t\t\tif (id) {\n\t\t\t\treturn request(this._hoist._configs, { url: \"auth.hoi.io/bucket/\" + id, data: data }, success, error, context);\n\t\t\t} else {\n\t\t\t\treturn request(this._hoist._configs, { url: \"auth.hoi.io/bucket\", data: data }, success, error, context);\n\t\t\t}\n\t\t},\n\n\t\tmeta: function (key, meta, success, error, context) {\n\t\t\tvar hoist = this._hoist;\n\n\t\t\tif (typeof key !== \"string\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = meta;\n\t\t\t\tmeta = key;\n\n\t\t\t\tif (!hoist._bucket) {\n\t\t\t\t\treturn asyncError(error, context, \"No bucket to post metadata against\", null);\n\t\t\t\t}\n\n\t\t\t\tkey = hoist._bucket.key;\n\t\t\t}\n\n\t\t\treturn request(hoist._configs, {\n\t\t\t\turl: \"auth.hoi.io/bucket/\" + key + \"/meta\",\n\t\t\t\tdata: meta,\n\t\t\t\tprocess: function (bucket) {\n\t\t\t\t\tif (hoist._bucket && hoist._bucket.key == bucket.key) {\n\t\t\t\t\t\thoist._bucket = bucket;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn bucket;\n\t\t\t\t}\n\t\t\t}, success, error, context);\n\t\t},\n\n\t\tset: function (key, success, error, context) {\n\t\t\tvar hoist = this._hoist;\n\n\t\t\treturn request(this._hoist._configs, {\n\t\t\t\turl: \"auth.hoi.io/bucket/current/\" + (key || \"default\"),\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tprocess: function (bucket) {\n\t\t\t\t\thoist._bucket = key ? bucket : null;\n\t\t\t\t\treturn bucket;\n\t\t\t\t}\n\t\t\t}, success, error, context);\n\t\t},\n\n\t\tlist: function (success, error, context) {\n\t\t\treturn request(this._hoist._configs, { url: \"auth.hoi.io/buckets\" }, success, error, context);\n\t\t},\n\n\t\tinvite: function (key, data, success, error, context) {\n\t\t\tif (typeof key == \"object\") {\n\t\t\t\tcontext = error;\n\t\t\t\terror = success;\n\t\t\t\tsuccess = data;\n\t\t\t\tdata = key;\n\t\t\t\tkey = null;\n\t\t\t}\n\n\t\t\tvar hoist = this._hoist;\n\n\t\t\tif (!key || hoist._bucket && hoist._bucket.key == key) {\n\t\t\t\treturn request(hoist._configs, { url: \"auth.hoi.io/invite\", data: data }, success, error, context);\n\t\t\t} else {\n\t\t\t\t// switch bucket so you can invite the user into the right one -- this is suboptimal but works for now\n\t\t\t\t\n\t\t\t\treturn this.set(key).then(function () {\n\t\t\t\t\treturn request(hoist._configs, { url: \"auth.hoi.io/invite\", data: data }, success, context);\n\t\t\t\t}, function (message) {\n\t\t\t\t\terror && error.call(context, message);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction makeHoist() {\n\t\tvar hoist = extend(function (type, bucket) {\n\t\t\tif (classOf(type) === \"Object\") {\n\t\t\t\treturn new ObjectDataManager(hoist, type, bucket);\n\t\t\t} else {\n\t\t\t\treturn new DataManager(hoist, type, bucket);\n\t\t\t}\n\t\t}, hoistMethods);\n\n\t\thoist.bucket = extend(function (meta, success, error, context, cx) {\n\t\t\tvar type = typeof meta;\n\n\t\t\tif (type === \"function\") {\n\t\t\t\thoist.bucket.status(meta, success, error);\n\t\t\t} else if (type === \"string\" && typeof success === \"object\") {\n\t\t\t\t\thoist.bucket.post(meta, success, error, context, cx);\n\t\t\t} else if (type === \"string\" || meta === null) {\n\t\t\t\thoist.bucket.set(meta, success, error, context);\n\t\t\t} else if (type === \"object\") {\n\t\t\t\thoist.bucket.meta(meta, success, error, context);\n\t\t\t} else {\n\t\t\t\treturn hoist._bucket;\n\t\t\t}\n\t\t}, bucketMethods);\n\n\t\thoist.bucket._hoist = hoist;\n\n\t\treturn hoist;\n\t}\n\n\tvar Hoist = extend(makeHoist(), {\n\t\t_configs: {\n\t\t\tprotocol: \"https://\"\n\t\t},\n\t\t_user: null,\n\t\t_bucket: null,\n\t\t_managers: {}\n\t});\n\n\t// throw Hoist at something it will stick to\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(\"Hoist\", [], function () { return Hoist; });\n\t}\n\telse if (typeof window === \"object\" && typeof window.document === \"object\") {\n\t\twindow.Hoist = Hoist;\n\t}\n\telse if (typeof module === \"object\" && typeof module.exports === \"object\") {\n\t\tmodule.exports = Hoist;\n\t}\n})();\n\n"
  ]
}